{"ast":null,"code":"var _jsxFileName = \"E:\\\\project\\\\cafeproject\\\\cafein_client\\\\src\\\\components\\\\Search.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { gql } from 'apollo-boost';\nimport { useQuery, useMutation } from \"react-apollo-hooks\";\nimport AnimateHeight from 'react-animate-height';\nconst TOGGLE_MARKER_STATUS = gql`\n    mutation toggleMarkerStatus {\n        toggleMarkerStatus @client \n    }\n`;\nconst GET_MARKER_STATUS = gql`\n    query getMarkerStatus {\n        getMarkerStatus @client \n    }\n`;\n\nfunction useOutsideAlerter(ref, onCafeClose) {\n  useEffect(() => {\n    /**\r\n     * Alert if clicked on outside of element\r\n     */\n    function handleClickOutside(event) {\n      if (ref.current && !ref.current.contains(event.target)) {\n        onCafeClose();\n      } else if (ref.current.contains(event.target)) {\n        console.log(\"happy\");\n      }\n    } // Bind the event listener\n\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      // Unbind the event listener on clean up\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [ref]);\n}\n\nconst Search = ({\n  setButtonListener,\n  setShow,\n  onCafeClose,\n  selectedStore\n}) => {\n  const [height, setHeight] = useState(300);\n  const wrapperRef = useRef(null);\n  useOutsideAlerter(wrapperRef, onCafeClose);\n  const [toggleMarkerStatus] = useMutation(TOGGLE_MARKER_STATUS);\n  const {\n    data,\n    refetch,\n    loading,\n    error\n  } = useQuery(GET_MARKER_STATUS);\n\n  if (loading) {\n    console.log(loading);\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 12\n      }\n    }, \"loading..\");\n  }\n\n  let markerStatus;\n\n  if (data) {\n    markerStatus = data.getMarkerStatus;\n  }\n\n  function handleClick(e) {\n    const status = toggleMarkerStatus();\n    setButtonListener(status);\n    setHeight(100);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search_group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map_controller\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"marker_change_div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }, markerStatus === \"percent\" && /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/#\",\n    className: \"marker_change_text\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 84\n    }\n  }, \" \"), markerStatus === \"text\" && /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/#\",\n    className: \"marker_change_percent\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 83\n    }\n  }, \" \")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"gps_div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/#\",\n    className: \"gps_btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }, \" \"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, \" \"), setShow ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detail_div\",\n    ref: wrapperRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 25\n    }\n  }, \"cafe name: \", selectedStore.cafe_name, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 65\n    }\n  }), \"lat : \", selectedStore.lat, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 54\n    }\n  }), \"lng : \", selectedStore.lng, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 54\n    }\n  }), \"df\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 31\n    }\n  }), \"df\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 29\n    }\n  }), \"dfwf\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 29\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search_bar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"search_btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  }, \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input_wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"search_input\",\n    placeholder: \"\\uC704\\uCE58\\uB97C \\uAC80\\uC0C9\\uD574\\uC8FC\\uC138\\uC694\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 29\n    }\n  }))));\n};\n\nexport default Search;","map":{"version":3,"sources":["E:/project/cafeproject/cafein_client/src/components/Search.js"],"names":["React","useState","useEffect","useRef","gql","useQuery","useMutation","AnimateHeight","TOGGLE_MARKER_STATUS","GET_MARKER_STATUS","useOutsideAlerter","ref","onCafeClose","handleClickOutside","event","current","contains","target","console","log","document","addEventListener","removeEventListener","Search","setButtonListener","setShow","selectedStore","height","setHeight","wrapperRef","toggleMarkerStatus","data","refetch","loading","error","markerStatus","getMarkerStatus","handleClick","e","status","cafe_name","lat","lng"],"mappings":";AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AAEA,SAASC,GAAT,QAAoB,cAApB;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,oBAAtC;AACA,OAAOC,aAAP,MAA0B,sBAA1B;AAEA,MAAMC,oBAAoB,GAAGJ,GAAI;;;;CAAjC;AAOA,MAAMK,iBAAiB,GAAGL,GAAI;;;;CAA9B;;AAMA,SAASM,iBAAT,CAA2BC,GAA3B,EAAgCC,WAAhC,EAA6C;AACzCV,EAAAA,SAAS,CAAC,MAAM;AACZ;;;AAGA,aAASW,kBAAT,CAA4BC,KAA5B,EAAmC;AAC/B,UAAIH,GAAG,CAACI,OAAJ,IAAe,CAACJ,GAAG,CAACI,OAAJ,CAAYC,QAAZ,CAAqBF,KAAK,CAACG,MAA3B,CAApB,EAAwD;AACpDL,QAAAA,WAAW;AACd,OAFD,MAEO,IAAGD,GAAG,CAACI,OAAJ,CAAYC,QAAZ,CAAqBF,KAAK,CAACG,MAA3B,CAAH,EAAuC;AAC1CC,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACH;AACJ,KAVW,CAYZ;;;AACAC,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCR,kBAAvC;AACA,WAAO,MAAM;AACT;AACAO,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CT,kBAA1C;AACH,KAHD;AAIH,GAlBQ,EAkBN,CAACF,GAAD,CAlBM,CAAT;AAmBH;;AAGD,MAAMY,MAAM,GAAG,CAAC;AAACC,EAAAA,iBAAD;AAAoBC,EAAAA,OAApB;AAA6Bb,EAAAA,WAA7B;AAA0Cc,EAAAA;AAA1C,CAAD,KAA8D;AAEzE,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsB3B,QAAQ,CAAC,GAAD,CAApC;AAGA,QAAM4B,UAAU,GAAG1B,MAAM,CAAC,IAAD,CAAzB;AACAO,EAAAA,iBAAiB,CAACmB,UAAD,EAAajB,WAAb,CAAjB;AAEA,QAAM,CAACkB,kBAAD,IAAuBxB,WAAW,CAACE,oBAAD,CAAxC;AAGF,QAAM;AAACuB,IAAAA,IAAD;AAAOC,IAAAA,OAAP;AAAgBC,IAAAA,OAAhB;AAAyBC,IAAAA;AAAzB,MAAkC7B,QAAQ,CAACI,iBAAD,CAAhD;;AAEA,MAAIwB,OAAJ,EAAa;AACZf,IAAAA,OAAO,CAACC,GAAR,CAAYc,OAAZ;AACA,wBAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAR;AACA;;AAED,MAAIE,YAAJ;;AACA,MAAIJ,IAAJ,EAAU;AACRI,IAAAA,YAAY,GAAGJ,IAAI,CAACK,eAApB;AAED;;AACC,WAASC,WAAT,CAAqBC,CAArB,EAAwB;AACpB,UAAMC,MAAM,GAAGT,kBAAkB,EAAjC;AACAN,IAAAA,iBAAiB,CAACe,MAAD,CAAjB;AACAX,IAAAA,SAAS,CAAC,GAAD,CAAT;AACH;;AACD,sBAEQ;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEG;AAAM,IAAA,SAAS,EAAC,gBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEK;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACkCO,YAAY,KAAI,SAAhB,iBAA6B;AAAG,IAAA,IAAI,EAAC,IAAR;AAAa,IAAA,SAAS,EAAC,oBAAvB;AAA6C,IAAA,OAAO,EAAEE,WAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAD/D,EAEmCF,YAAY,KAAK,MAAjB,iBAA2B;AAAG,IAAA,IAAI,EAAC,IAAR;AAAa,IAAA,SAAS,EAAC,uBAAvB;AAAgD,IAAA,OAAO,EAAEE,WAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAF9D,CAFL,eAOK;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAG,IAAA,IAAI,EAAC,IAAR;AAAa,IAAA,SAAS,EAAC,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADJ,CAPL,CAFH,eAeI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAfJ,EAgBKZ,OAAO,gBAGA;AAAK,IAAA,SAAS,EAAC,YAAf;AAA4B,IAAA,GAAG,EAAEI,UAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACgBH,aAAa,CAACc,SAD9B,eACwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADxC,YAEWd,aAAa,CAACe,GAFzB,eAE6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAF7B,YAGWf,aAAa,CAACgB,GAHzB,eAG6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAH7B,qBAIM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJN,qBAKM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALN,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANJ,eAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPJ,eAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARJ,eASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATJ,eAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVJ,eAWI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXJ,eAYI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZJ,eAaI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAbJ,eAcI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAdJ,eAeI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfJ,uBAiBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBJ,eAkBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAlBJ,eAmBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAnBJ,eAoBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApBJ,CAHA,gBA2BJ;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,SAAS,EAAC,YAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADJ,eAEI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,SAAS,EAAC,cAA7B;AAA4C,IAAA,WAAW,EAAC,yDAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAFJ,CA3CR,CAFR;AAyDH,CArFD;;AAuFA,eAAenB,MAAf","sourcesContent":["\r\nimport React, { useState, useEffect, useRef } from 'react';\r\n\r\nimport { gql } from 'apollo-boost';\r\nimport { useQuery, useMutation } from \"react-apollo-hooks\";\r\nimport AnimateHeight from 'react-animate-height';\r\n\r\nconst TOGGLE_MARKER_STATUS = gql`\r\n    mutation toggleMarkerStatus {\r\n        toggleMarkerStatus @client \r\n    }\r\n`;\r\n\r\n\r\nconst GET_MARKER_STATUS = gql`\r\n    query getMarkerStatus {\r\n        getMarkerStatus @client \r\n    }\r\n`;\r\n\r\nfunction useOutsideAlerter(ref, onCafeClose) {\r\n    useEffect(() => {\r\n        /**\r\n         * Alert if clicked on outside of element\r\n         */\r\n        function handleClickOutside(event) {\r\n            if (ref.current && !ref.current.contains(event.target)) {\r\n                onCafeClose();\r\n            } else if(ref.current.contains(event.target)) {\r\n                console.log(\"happy\");\r\n            }\r\n        }\r\n\r\n        // Bind the event listener\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => {\r\n            // Unbind the event listener on clean up\r\n            document.removeEventListener(\"mousedown\", handleClickOutside);\r\n        };\r\n    }, [ref]);\r\n}\r\n\r\n\r\nconst Search = ({setButtonListener, setShow, onCafeClose, selectedStore}) => {\r\n\r\n    const [height, setHeight] = useState(300);\r\n\r\n\r\n    const wrapperRef = useRef(null);\r\n    useOutsideAlerter(wrapperRef, onCafeClose);\r\n\r\n    const [toggleMarkerStatus] = useMutation(TOGGLE_MARKER_STATUS);\r\n\r\n\r\n\t\tconst {data, refetch, loading, error} = useQuery(GET_MARKER_STATUS);\r\n\r\n\t\tif (loading) {\r\n\t\t\tconsole.log(loading);\r\n\t\t\treturn (<p>loading..</p>);\r\n\t\t}\r\n\r\n\t\tlet markerStatus;\r\n\t\tif (data) {\r\n\t\t\t\tmarkerStatus = data.getMarkerStatus;\r\n\r\n\t\t}\r\n    function handleClick(e) {\r\n        const status = toggleMarkerStatus();\r\n        setButtonListener(status);\r\n        setHeight(100);\r\n    }\r\n    return (\r\n        \t\t\t\t\t\r\n            <div className=\"search_group\">\r\n\r\n               < div className=\"map_controller\"> \r\n\r\n                    <div className=\"marker_change_div\">\r\n                                                    { markerStatus ===\"percent\" && <a href=\"/#\" className=\"marker_change_text\"  onClick={handleClick}> </a> }\r\n                                                    {  markerStatus === \"text\" && <a href=\"/#\" className=\"marker_change_percent\"  onClick={handleClick}> </a> }\r\n                    </div>\r\n\r\n                    <div className=\"gps_div\">\r\n                        <a href=\"/#\" className=\"gps_btn\"> </a>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div className=\"line\"> </div>\r\n                {setShow ? (\r\n                    \r\n                        \r\n                        <div className=\"detail_div\" ref={wrapperRef}>\r\n                            cafe name: {selectedStore.cafe_name}<br/>\r\n                            lat : {selectedStore.lat}<br/>\r\n                            lng : {selectedStore.lng}<br/>\r\n                            df<br/>\r\n                            df<br/>\r\n                            <br/>\r\n                            <br/>\r\n                            <br/>\r\n                            <br/>\r\n                            <br/>\r\n                            <br/>\r\n                            <br/>\r\n                            <br/>\r\n                            <br/>\r\n                            <br/>\r\n                            dfwf\r\n                            <br/>\r\n                            <br/>\r\n                            <br/>\r\n                            <br/>\r\n                        </div>\r\n\r\n                ) : ( \r\n                    <div className=\"search_bar\">\r\n                        <button type=\"button\" className=\"search_btn\"> </button>\r\n                        <div className=\"input_wrap\">\r\n                            <input type=\"text\" className=\"search_input\" placeholder=\"위치를 검색해주세요\"></input>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                    \r\n                        \r\n            </div>\r\n    )\r\n\r\n};\r\n\r\nexport default Search;\r\n"]},"metadata":{},"sourceType":"module"}